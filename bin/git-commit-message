#!/usr/bin/env bash
set -euo pipefail

# Create a commit with a one-line message.
# Manual equivalent:
#   git commit -m "<message>"
usage() {
  cat <<'EOF'
Usage: git-commit-message <message>

Commit staged changes using a one-line message.

Options:
  -h, --help, -help  Show help

Notes:
  - For multi-line commit messages, use: git commit
EOF
}

# Show help and exit early when requested.
if [[ "${1:-}" == "-h" || "${1:-}" == "--help" || "${1:-}" == "-help" ]]; then
  usage
  exit 0
fi

# Require at least one word for the message.
if [[ $# -lt 1 ]]; then
  echo "Missing required argument: <message>" >&2
  usage >&2
  exit 1
fi

# Execute the git command with the full message string.
git commit -m "$*"
